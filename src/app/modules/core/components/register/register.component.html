<div class="p-5 w-100 card-bg">
    <div *ngIf="!isFinished">
      <h2 class="font-weight-bold d-flex justify-content-center">Sign Up</h2>
      <div mat-dialog-content class="d-flex justify-content-center">
        <form class="w-100" (ngSubmit)="onSubmit()" [formGroup] = "registrationForm">
          <div class="row">
            <mat-form-field class="mb-2">
              <mat-label>Email</mat-label>
              <input type="email" matInput placeholder="Example@example.com" formControlName="email" name="email">
            </mat-form-field>
            <div class="mb-2">
              <mat-form-field class="col-6 pe-2">
                <mat-label>First name</mat-label>
                <input type="text" matInput formControlName="firstName" name="firstName">
              </mat-form-field>
              <mat-form-field class="col-6 ps-2">
                <mat-label>Last name</mat-label>
                <input type="text" matInput formControlName="lastName" name="lastName">
              </mat-form-field>
            </div>
            <mat-form-field class="mb-2">
              <mat-label>Phone number</mat-label>
              <input type="tel" matInput placeholder="+381645023454" formControlName="phoneNumber" name="phoneNumber">
              <mat-icon matSuffix>phone</mat-icon>
              <mat-error *ngIf="registrationForm.controls.phoneNumber.hasError('pattern')">
                Not a valid phone number
              </mat-error>
            </mat-form-field>

            <mat-form-field class="mb-2">
              <mat-label>Address</mat-label>
              <input type="address" matInput placeholder="10 Downing Street" formControlName="address" name="address">
            </mat-form-field>
            <mat-form-field class="mb-2">
              <mat-label>Password</mat-label>
              <input type="password" matInput placeholder="Enter your password" formControlName="password" name="password">
              <mat-error *ngIf="registrationForm.controls.password.hasError('minLength')">
                Password must be at least 6 characters long
              </mat-error>
              <mat-error *ngIf="registrationForm.controls.password.hasError('maxLength')">
                Password can not be longer than 20 characters
              </mat-error>
              <mat-error *ngIf="registrationForm.controls.password.hasError('whitespace')">
                Password can not contain whitespace characters
              </mat-error>
            </mat-form-field>
            <mat-form-field class="mb-2">
              <mat-label>Confirm password</mat-label>
              <input type="password" matInput placeholder="Confirm password" formControlName="confirmPassword" name="confirmPassword">
              <mat-error *ngIf="registrationForm.controls.confirmPassword.hasError('passwordsNotMatching')">
                Passwords are not matching
              </mat-error>
            </mat-form-field>
          </div>
          <p class="errorMessage" *ngIf="this.errorMessage != ''">{{errorMessage}}</p>
          <div mat-dialog-actions class="d-flex justify-content-center">
            <button [disabled]="!registrationForm.valid" class="w-50" type="submit" mat-flat-button color="accent">Sign Up</button>
          </div>
        </form>
      </div>

      <div class=" d-flex justify-content-center" *ngIf="userType === 'PASSENGER' ">
        <p>Already have an account?&nbsp;</p>
        <a (click)="navigateToLogin()" class="font-weight-bold text-decoration-none clickable">Login</a>
      </div>
    </div>
    <div *ngIf="isFinished">
      <h2>Registration has been successful.</h2>
      <p>Proceed to <a class="text-decoration-none clickable" (click)="navigateToLogin()">login</a>.</p>
      <img src="assets/img/car_drawing.png">
    </div>
</div>
